<section class="auth-wrapper">
  <div class="auth-card">
    <h1 class="title">{{ 'REGISTER.CREATE-ACCOUNT' | translate }}</h1>
    <p class="subtitle">{{ 'REGISTER.DESCRIPTION' | translate }}</p>

    <form #form="ngForm" (ngSubmit)="register(form)" novalidate>
      <div class="field">
        <label class="label" for="email">Email</label>
        <div class="input-underline">
          <input
            id="email"
            name="email"
            type="email"
            [(ngModel)]="email"
            required
            email
            [class.invalid]="form.submitted && form.controls['email'].invalid"
          />
          <span class="underline"></span>
        </div>
        <small class="error" *ngIf="form.submitted && form.controls['email']?.errors?.['required']"
          >{{ 'REGISTER.VALIDATION.REQUIRED-EMAIL' | translate }}.</small
        >
        <small class="error" *ngIf="form.submitted && form.controls['email']?.errors?.['email']"
          >{{ 'REGISTER.VALIDATION.INVALID-EMAIL' | translate }}.</small
        >
      </div>

      <div class="field">
        <label class="label" for="password">{{ 'REGISTER.PASSWORD' | translate }}</label>
        <div class="input-underline">
          <input
            id="password"
            name="password"
            type="password"
            [(ngModel)]="password"
            required
            minlength="6"
            [class.invalid]="form.submitted && form.controls['password'].invalid"
          />
          <span class="underline"></span>
        </div>
        <small
          class="error"
          *ngIf="form.submitted && form.controls['password']?.errors?.['required']"
          >{{ 'REGISTER.VALIDATION.REQUIRED-PASSWORD' | translate }}.</small
        >
        <small
          class="error"
          *ngIf="form.submitted && form.controls['password']?.errors?.['minlength']"
          >{{ 'REGISTER.VALIDATION.PASSWORD-LENGTH' | translate }}.</small
        >
      </div>

      <div class="field">
        <label class="label" for="confirm">{{ 'REGISTER.CONFIRM-PASSWORD' | translate }}</label>
        <div class="input-underline">
          <input
            id="confirm"
            name="confirm"
            type="password"
            [(ngModel)]="confirmPassword"
            required
            [class.invalid]="form.submitted && confirmPassword && confirmPassword !== password"
          />
          <span class="underline"></span>
        </div>
        <small
          class="error"
          *ngIf="form.submitted && confirmPassword && confirmPassword !== password"
          >{{ 'REGISTER.VALIDATION.PASSWORD-NOT-MATCH' | translate }}</small
        >
      </div>

      <div class="actions">
        <button type="submit" class="btn primary" [disabled]="loading" [class.loading]="loading">
          <span class="spinner" *ngIf="loading" aria-hidden="true"></span>
          {{
            (loading ? 'REGISTER.LOADING.CREATING' : 'REGISTER.LOADING.CREATE-ACCOUNT') | translate
          }}
        </button>
        <a routerLink="/auth/login" class="link">{{ 'REGISTER.BACK' | translate }}</a>
      </div>

      <div class="alert success" *ngIf="successMsg">{{ successMsg }}</div>
      <div class="alert error" *ngIf="errorMsg">{{ errorMsg }}</div>
    </form>
  </div>
</section>
