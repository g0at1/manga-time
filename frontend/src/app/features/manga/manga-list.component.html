<h2 class="title">Manga List</h2>

<label class="search">
  <input
    class="search__input"
    type="text"
    placeholder="Search by title…"
    [(ngModel)]="query"
    (ngModelChange)="onQueryChange($event)"
    aria-label="Search manga"
  />
  <button
    *ngIf="query"
    type="button"
    class="search__clear"
    (click)="query = ''; onQueryChange('')"
    aria-label="Clear search"
  >
    ×
  </button>
</label>

<div *ngIf="isLoading" class="muted">Loading…</div>
<div *ngIf="!isLoading && mangas.length === 0" class="muted">No manga found.</div>

<div *ngIf="!isLoading && mangas.length > 0" class="panel">
  <ul class="mlist">
    <li *ngFor="let m of mangas; trackBy: trackById" class="mlist__row">
      <a [routerLink]="['/manga', m.id]" class="mlist__link">
        <img
          class="mlist__cover"
          [src]="m.coverUrl || 'manga-placeholder.svg'"
          [alt]="m.title"
          (error)="onImgError($event)"
        />
        <div class="mlist__meta">
          <div class="mlist__title">{{ m.title }}</div>
          <div class="mlist__author">{{ m.author }}</div>
        </div>
      </a>
    </li>
  </ul>
</div>
